import {
  UnitTemplate,
  UnitType,
  UnitRarity,
  TerrainType,
  Affinity,
} from "../types/game";

/**
 * Unit templates database
 * This acts as a source of truth for all unit data in the game
 * In a production environment, this would likely be:
 * 1. Split into multiple files for better organization
 * 2. Potentially stored on a server/database
 * 3. Cached client-side for performance
 */
export const unitTemplates: Record<string, UnitTemplate> = {
  // WARRIORS
  warrior_basic: {
    id: "warrior_basic",
    name: "Basic Warrior",
    type: UnitType.WARRIOR,
    rarity: UnitRarity.COMMON,
    description: "A stalwart defender with high defense and physical attack.",
    modelId: "model_warrior_01",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 55,
      maxHp: 55,
      patk: 8,
      matk: 2,
      mp: 5,
      maxMp: 5,
      sp: 40,
      maxSp: 40,
      range: 1,
      def: 20,
      res: 5,
      agi: 4,
      skill: 20,
      luck: 5,
      wis: 1,
      mov: 4,
      jump: 2,
    },
    attributes: {
      hitRate: 90,
      evasionRate: 5,
      resolve: 40,
    },
    growthRates: {
      hp: 8,
      maxHp: 8,
      patk: 2.5,
      matk: 0.5,
      mp: 1,
      maxMp: 1,
      sp: 3,
      maxSp: 3,
      def: 3,
      res: 1,
      agi: 1,
      skill: 2,
      luck: 1,
      wis: 0.5,
    },
    abilityIds: ["basic_attack", "shield_bash"],
    preferredTerrain: [TerrainType.GRASS, TerrainType.MOUNTAIN],
    affinity: Affinity.EARTH,
  },
  warrior_elite: {
    id: "warrior_elite",
    name: "Elite Guard",
    type: UnitType.WARRIOR,
    rarity: UnitRarity.RARE,
    description: "A veteran warrior who has mastered defensive techniques.",
    modelId: "model_warrior_02",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 65,
      maxHp: 65,
      patk: 10,
      matk: 2,
      mp: 5,
      maxMp: 5,
      sp: 45,
      maxSp: 45,
      range: 1,
      def: 25,
      res: 8,
      agi: 5,
      skill: 25,
      luck: 10,
      wis: 3,
      mov: 4,
      jump: 2,
    },
    attributes: {
      hitRate: 92,
      evasionRate: 8,
      resolve: 50,
    },
    growthRates: {
      hp: 10,
      maxHp: 10,
      patk: 3,
      matk: 0.8,
      mp: 1,
      maxMp: 1,
      sp: 4,
      maxSp: 4,
      def: 4,
      res: 1.5,
      agi: 1.2,
      skill: 2.5,
      luck: 1.5,
      wis: 0.8,
    },
    abilityIds: ["basic_attack", "shield_bash", "provoke"],
    preferredTerrain: [TerrainType.GRASS, TerrainType.MOUNTAIN],
    affinity: Affinity.EARTH,
  },

  // ARCHERS
  archer_basic: {
    id: "archer_basic",
    name: "Scout Archer",
    type: UnitType.ARCHER,
    rarity: UnitRarity.COMMON,
    description: "A skilled marksman who excels at long-range combat.",
    modelId: "model_archer_01",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 45,
      maxHp: 45,
      patk: 7,
      matk: 3,
      mp: 8,
      maxMp: 8,
      sp: 30,
      maxSp: 30,
      range: 5,
      def: 6,
      res: 5,
      agi: 8,
      skill: 25,
      luck: 8,
      wis: 3,
      mov: 5,
      jump: 2,
    },
    attributes: {
      hitRate: 95,
      evasionRate: 15,
      resolve: 30,
    },
    growthRates: {
      hp: 5,
      maxHp: 5,
      patk: 2,
      matk: 1,
      mp: 1.5,
      maxMp: 1.5,
      sp: 3,
      maxSp: 3,
      def: 1,
      res: 1,
      agi: 2,
      skill: 3.5,
      luck: 2,
      wis: 1,
    },
    abilityIds: ["basic_attack", "precise_shot"],
    preferredTerrain: [TerrainType.GRASS, TerrainType.FOREST],
    affinity: Affinity.WIND,
  },
  archer_elite: {
    id: "archer_elite",
    name: "Ranger",
    type: UnitType.ARCHER,
    rarity: UnitRarity.RARE,
    description:
      "A masterful archer who can hit targets with uncanny precision.",
    modelId: "model_archer_02",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 50,
      maxHp: 50,
      patk: 9,
      matk: 4,
      mp: 10,
      maxMp: 10,
      sp: 35,
      maxSp: 35,
      range: 6,
      def: 7,
      res: 7,
      agi: 10,
      skill: 30,
      luck: 12,
      wis: 5,
      mov: 5,
      jump: 3,
    },
    attributes: {
      hitRate: 98,
      evasionRate: 20,
      resolve: 35,
    },
    growthRates: {
      hp: 6,
      maxHp: 6,
      patk: 2.5,
      matk: 1.2,
      mp: 2,
      maxMp: 2,
      sp: 3.5,
      maxSp: 3.5,
      def: 1.5,
      res: 1.5,
      agi: 2.5,
      skill: 4,
      luck: 2.5,
      wis: 1.5,
    },
    abilityIds: ["basic_attack", "precise_shot", "multishot"],
    preferredTerrain: [TerrainType.GRASS, TerrainType.FOREST],
    affinity: Affinity.WIND,
  },

  // MAGES
  mage_basic: {
    id: "mage_basic",
    name: "Apprentice Mage",
    type: UnitType.MAGE,
    rarity: UnitRarity.COMMON,
    description: "A novice spellcaster with potential for powerful magic.",
    modelId: "model_mage_01",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 40,
      maxHp: 40,
      patk: 2,
      matk: 10,
      mp: 30,
      maxMp: 30,
      sp: 5,
      maxSp: 5,
      range: 3,
      def: 2,
      res: 8,
      agi: 3,
      skill: 3,
      luck: 4,
      wis: 10,
      mov: 3,
      jump: 1,
    },
    attributes: {
      hitRate: 85,
      evasionRate: 5,
      resolve: 25,
    },
    growthRates: {
      hp: 4,
      maxHp: 4,
      patk: 0.5,
      matk: 3,
      mp: 4,
      maxMp: 4,
      sp: 1,
      maxSp: 1,
      def: 0.5,
      res: 2.5,
      agi: 1,
      skill: 1,
      luck: 1,
      wis: 3,
    },
    abilityIds: ["basic_attack", "fireball"],
    preferredTerrain: [TerrainType.GRASS],
    affinity: Affinity.FIRE,
  },
  mage_elite: {
    id: "mage_elite",
    name: "Archmage",
    type: UnitType.MAGE,
    rarity: UnitRarity.RARE,
    description:
      "A powerful spellcaster who can bend the elements to their will.",
    modelId: "model_mage_02",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 45,
      maxHp: 45,
      patk: 3,
      matk: 13,
      mp: 40,
      maxMp: 40,
      sp: 8,
      maxSp: 8,
      range: 4,
      def: 3,
      res: 12,
      agi: 4,
      skill: 4,
      luck: 5,
      wis: 15,
      mov: 3,
      jump: 1,
    },
    attributes: {
      hitRate: 90,
      evasionRate: 8,
      resolve: 30,
    },
    growthRates: {
      hp: 5,
      maxHp: 5,
      patk: 0.8,
      matk: 4,
      mp: 5,
      maxMp: 5,
      sp: 1.5,
      maxSp: 1.5,
      def: 1,
      res: 3,
      agi: 1.2,
      skill: 1.2,
      luck: 1.3,
      wis: 4,
    },
    abilityIds: ["basic_attack", "fireball", "lightning_bolt", "ice_shard"],
    preferredTerrain: [TerrainType.GRASS],
    affinity: Affinity.FIRE,
  },

  // HEALERS
  healer_basic: {
    id: "healer_basic",
    name: "Acolyte",
    type: UnitType.HEALER,
    rarity: UnitRarity.COMMON,
    description: "A devoted healer who can mend wounds and protect allies.",
    modelId: "model_healer_01",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 38,
      maxHp: 38,
      patk: 2,
      matk: 8,
      mp: 35,
      maxMp: 35,
      sp: 5,
      maxSp: 5,
      range: 3,
      def: 2,
      res: 10,
      agi: 3,
      skill: 2,
      luck: 8,
      wis: 12,
      mov: 3,
      jump: 1,
    },
    attributes: {
      hitRate: 80,
      evasionRate: 5,
      resolve: 20,
    },
    growthRates: {
      hp: 4,
      maxHp: 4,
      patk: 0.5,
      matk: 2.5,
      mp: 4.5,
      maxMp: 4.5,
      sp: 1,
      maxSp: 1,
      def: 0.5,
      res: 2.5,
      agi: 1,
      skill: 0.8,
      luck: 2,
      wis: 3.5,
    },
    abilityIds: ["basic_attack", "heal", "protect"],
    preferredTerrain: [TerrainType.GRASS],
    affinity: Affinity.WATER,
  },
  healer_elite: {
    id: "healer_elite",
    name: "High Priest",
    type: UnitType.HEALER,
    rarity: UnitRarity.RARE,
    description:
      "A master of healing arts who can restore life and banish darkness.",
    modelId: "model_healer_02",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 42,
      maxHp: 42,
      patk: 3,
      matk: 10,
      mp: 45,
      maxMp: 45,
      sp: 8,
      maxSp: 8,
      range: 4,
      def: 3,
      res: 15,
      agi: 4,
      skill: 3,
      luck: 12,
      wis: 18,
      mov: 3,
      jump: 1,
    },
    attributes: {
      hitRate: 85,
      evasionRate: 8,
      resolve: 25,
    },
    growthRates: {
      hp: 5,
      maxHp: 5,
      patk: 0.8,
      matk: 3,
      mp: 6,
      maxMp: 6,
      sp: 1.5,
      maxSp: 1.5,
      def: 0.8,
      res: 3.5,
      agi: 1.2,
      skill: 1,
      luck: 3,
      wis: 4.5,
    },
    abilityIds: ["basic_attack", "heal", "mass_heal", "revive", "protect"],
    preferredTerrain: [TerrainType.GRASS],
    affinity: Affinity.WATER,
  },

  // ROGUES
  rogue_basic: {
    id: "rogue_basic",
    name: "Thief",
    type: UnitType.ROGUE,
    rarity: UnitRarity.COMMON,
    description:
      "A nimble fighter who uses stealth and cunning to gain the upper hand.",
    modelId: "model_rogue_01",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 42,
      maxHp: 42,
      patk: 7,
      matk: 2,
      mp: 10,
      maxMp: 10,
      sp: 35,
      maxSp: 35,
      range: 1,
      def: 4,
      res: 4,
      agi: 12,
      skill: 15,
      luck: 20,
      wis: 3,
      mov: 6,
      jump: 3,
    },
    attributes: {
      hitRate: 92,
      evasionRate: 25,
      resolve: 15,
    },
    growthRates: {
      hp: 5,
      maxHp: 5,
      patk: 2,
      matk: 0.8,
      mp: 1.5,
      maxMp: 1.5,
      sp: 3.5,
      maxSp: 3.5,
      def: 1,
      res: 1,
      agi: 3,
      skill: 2.5,
      luck: 3.5,
      wis: 1,
    },
    abilityIds: ["basic_attack", "backstab"],
    preferredTerrain: [TerrainType.GRASS, TerrainType.FOREST],
    affinity: Affinity.NEUTRAL,
  },
  rogue_elite: {
    id: "rogue_elite",
    name: "Assassin",
    type: UnitType.ROGUE,
    rarity: UnitRarity.RARE,
    description:
      "A master of stealth who can eliminate targets before they know what hit them.",
    modelId: "model_rogue_02",
    baseStats: {
      level: 1,
      exp: 0,
      hp: 48,
      maxHp: 48,
      patk: 9,
      matk: 3,
      mp: 15,
      maxMp: 15,
      sp: 40,
      maxSp: 40,
      range: 1,
      def: 5,
      res: 5,
      agi: 15,
      skill: 20,
      luck: 25,
      wis: 5,
      mov: 6,
      jump: 4,
    },
    attributes: {
      hitRate: 95,
      evasionRate: 30,
      resolve: 20,
    },
    growthRates: {
      hp: 6,
      maxHp: 6,
      patk: 2.5,
      matk: 1,
      mp: 2,
      maxMp: 2,
      sp: 4,
      maxSp: 4,
      def: 1.2,
      res: 1.2,
      agi: 3.5,
      skill: 3,
      luck: 4,
      wis: 1.5,
    },
    abilityIds: ["basic_attack", "backstab", "poison_strike", "shadow_step"],
    preferredTerrain: [TerrainType.GRASS, TerrainType.FOREST],
    affinity: Affinity.NEUTRAL,
  },
};

// Helper function to get a unit template by ID
export function getUnitTemplate(id: string): UnitTemplate | undefined {
  return unitTemplates[id];
}

// Helper function to get all unit templates by type
export function getUnitTemplatesByType(type: UnitType): UnitTemplate[] {
  return Object.values(unitTemplates).filter(
    (template) => template.type === type
  );
}

// Helper function to get all unit templates by rarity
export function getUnitTemplatesByRarity(rarity: UnitRarity): UnitTemplate[] {
  return Object.values(unitTemplates).filter(
    (template) => template.rarity === rarity
  );
}

// Helper function to get unit templates by affinity
export function getUnitTemplatesByAffinityElement(
  affinity: Affinity
): UnitTemplate[] {
  return Object.values(unitTemplates).filter(
    (template) => template.affinity === affinity
  );
}
